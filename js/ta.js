var thirstyFunctions;jQuery(document).ready((function(t){thirstyFunctions={recordLinkStatEvents:function(){"yes"==thirsty_global_vars.enable_record_stats&&t("body").on("click","a",thirstyFunctions.recordLinkStat)},recordLinkStat:function(r){var a,i,e=t(this),o=e.attr("href"),n=e.data("linkid"),s=e[0].innerText,l=o?o.split("?")[1]:"";s||(s=e.text()),(thirstyFunctions.isThirstyLink(o)||n)&&(e.data("clicked")?r.preventDefault():(e.data("clicked",!0),!s&&e.find("img").length&&(s=(a=e.find("img").prop("src").split("/"))[a.length-1]),"yes"===thirsty_global_vars.enable_js_redirect&&1!=e.data("nojs")&&("_blank"!=e.prop("target")||thirstyFunctions.disableNewWindow()||(i=window.open("","_blank"))),t.post(thirsty_global_vars.ajax_url,{action:"ta_click_data_redirect",href:o,page:window.location.href,link_id:n,keyword:s,qs:l},(function(t){e.data("clicked",!1),"yes"===thirsty_global_vars.enable_js_redirect&&1!=e.data("nojs")&&(i?i.location.href=t||o:window.location.href=t||o)})).fail((function(){e.data("clicked",!1),"yes"===thirsty_global_vars.enable_js_redirect&&1!=e.data("nojs")&&(i?i.location.href=o:window.location.href=o)}))))},disableNewWindow:function(){var t=["FBAN","MessengerForiOS","FBAV","Instagram","Pinterest","Twitter","Electron","Steam"];for(var r in t)if(navigator.userAgent.indexOf(t[r])>=0)return!0;return!1},isThirstyLink:function(a){if(a){var i,e,o=(a=a.replace("http:","{protocol}").replace("https:","{protocol}")).replace(thirsty_global_vars.home_url,"").replace("{protocol}","");return i=(o=0==o.indexOf("/")?o.replace("/",""):o).substr(0,o.indexOf("/")),e=a.replace("/"+i+"/","/"+thirsty_global_vars.link_prefix+"/").replace("{protocol}",window.location.protocol),!!(i&&t.inArray(i,r)>-1)&&e}},linkFixer:function(){if("yes"===thirsty_global_vars.link_fixer_enabled){var r,a,i,e,o,n=t("body a"),s=[];for(o=0;o<n.length;o++)r=t(n[o]).attr("href"),a=t(n[o]).attr("class"),i=t(n[o]).data("shortcode"),e=t(n[o]).has("img").length,(r=thirstyFunctions.isThirstyLink(r))&&!i&&s.push({key:o,class:a,href:r,is_image:e}),t(n[o]).removeAttr("data-shortcode");s.length<1||t.post(thirsty_global_vars.ajax_url,{action:"ta_link_fixer",hrefs:s,post_id:thirsty_global_vars.post_id},(function(r){if("success"==r.status)for(var a in r.data)if("object"==typeof r.data[a]){var i,e=r.data[a].key,o=t(n[e]).prop("href"),s=o?o.split("?")[1]:"",l=r.data[a].href,c=r.data[a].title,d=r.data[a].class;s&&r.data[a].pass_qs&&(i=l.indexOf("?")<0?"?":"&",l=l+i+s),l=l.replace("http:",window.location.protocol).replace("https:",window.location.protocol),c?t(n[e]).prop("title",c):t(n[e]).removeAttr("title"),"yes"==thirsty_global_vars.disable_thirstylink_class&&(d=d.replace("thirstylinkimg","").replace("thirstylink","").trim()),d?t(n[e]).prop("class",d):t(n[e]).removeAttr("class"),t(n[e]).prop("href",l).prop("rel",r.data[a].rel).prop("target",r.data[a].target).attr("data-linkid",r.data[a].link_id),"yes"===thirsty_global_vars.enable_js_redirect&&t(n[e]).attr("data-nojs",r.data[a].nojs)}}),"json")}}};var r=t.map(thirsty_global_vars.link_prefixes,(function(t,r){return[t]}));thirstyFunctions.recordLinkStatEvents(),thirstyFunctions.linkFixer()}));